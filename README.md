# å¤©æ°”é¢„æµ‹åº”ç”¨

ä¸€ä¸ªåŸºäºFastAPIå’Œæ¨¡æ‹ŸMLPæ¨¡å‹çš„å¤©æ°”é¢„æµ‹ç³»ç»Ÿï¼Œæä¾›7å¤©é¢„æŠ¥ã€å°æ—¶çº§é¢„æŠ¥ã€å®æ—¶å¤©æ°”å’Œç”Ÿæ´»æŒ‡æ•°ç­‰åŠŸèƒ½ã€‚

## é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºFastAPIå’Œæ¨¡æ‹ŸMLPæ¨¡å‹çš„å¤©æ°”é¢„æµ‹åº”ç”¨ï¼Œæä¾›7å¤©å¤©æ°”é¢„æŠ¥ã€å°æ—¶çº§é¢„æŠ¥ã€å®æ—¶å¤©æ°”å’Œç”Ÿæ´»æŒ‡æ•°ç­‰åŠŸèƒ½ã€‚å‰ç«¯ä½¿ç”¨HTMLã€JavaScriptã€Tailwind CSSå’ŒChart.jså®ç°æ•°æ®å¯è§†åŒ–ï¼Œåç«¯é‡‡ç”¨Python FastAPIæ¡†æ¶æä¾›APIæœåŠ¡ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹
- ğŸŒ¤ï¸ 7å¤©å¤©æ°”é¢„æŠ¥å±•ç¤º
- â° 24å°æ—¶å°æ—¶çº§æ¸©åº¦å’Œé™æ°´æ¦‚ç‡é¢„æµ‹
- ğŸŒ¡ï¸ å®æ—¶å¤©æ°”æ•°æ®æŸ¥è¯¢
- ğŸ“Š å¤šç§ç”Ÿæ´»æŒ‡æ•°æ¨èï¼ˆç´«å¤–çº¿ã€èˆ’é€‚åº¦ã€ç©¿è¡£ã€æ´—è½¦ã€è¿åŠ¨ï¼‰
- ğŸ” åŸå¸‚æœç´¢å’Œä½ç½®ç®¡ç†
- âš™ï¸ æ¨¡å‹çŠ¶æ€ç›‘æ§å’Œå‚æ•°è°ƒæ•´
- 7å¤©å¤©æ°”é¢„æŠ¥å±•ç¤º
- 24å°æ—¶å°æ—¶çº§æ¸©åº¦å’Œé™æ°´æ¦‚ç‡é¢„æµ‹
- å®æ—¶å¤©æ°”æ•°æ®æŸ¥è¯¢
- å¤šç§ç”Ÿæ´»æŒ‡æ•°æ¨èï¼ˆç´«å¤–çº¿ã€èˆ’é€‚åº¦ã€ç©¿è¡£ã€æ´—è½¦ã€è¿åŠ¨ï¼‰
- åŸå¸‚æœç´¢å’Œä½ç½®ç®¡ç†
- æ¨¡å‹çŠ¶æ€ç›‘æ§å’Œå‚æ•°è°ƒæ•´

## é¡¹ç›®ç»“æ„
```
weather_prediction/
â”œâ”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ start.ps1           # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ model/              # æ¨¡å‹ç›¸å…³ä»£ç 
â”œâ”€â”€ frontend/           # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.html      # å‰ç«¯é¡µé¢
â”‚   â””â”€â”€ app.js          # å‰ç«¯é€»è¾‘
â”œâ”€â”€ api/                # APIæœåŠ¡ä»£ç 
â”‚   â””â”€â”€ main.py         # FastAPIåç«¯æœåŠ¡
â”œâ”€â”€ Backend/            # åç«¯ç›¸å…³ä»£ç 
â”œâ”€â”€ data/               # æ•°æ®å­˜å‚¨
â””â”€â”€ __pycache__/
```

## å¿«é€Ÿå¼€å§‹
### ç¯å¢ƒè¦æ±‚
- Python 3.8+ 
- ç°ä»£æµè§ˆå™¨

### ä¸€é”®å¯åŠ¨ (Windows)
1. åŒå‡»è¿è¡Œ `start.ps1` è„šæœ¬ï¼Œæˆ–åœ¨PowerShellä¸­æ‰§è¡Œ:
```powershell
.\start.ps1
```

2. è„šæœ¬å°†è‡ªåŠ¨å®Œæˆ:
   - æ£€æŸ¥Pythonç¯å¢ƒ
   - å®‰è£…æ‰€éœ€ä¾èµ–
   - å¯åŠ¨åç«¯APIæœåŠ¡ (ç«¯å£8001)
   - å¯åŠ¨å‰ç«¯é™æ€æœåŠ¡å™¨ (ç«¯å£8000)

3. æœåŠ¡å¯åŠ¨åï¼Œå¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®:
   - å‰ç«¯é¡µé¢: http://localhost:8000
   - APIæ–‡æ¡£: http://localhost:8001/docs
   - åç«¯æœåŠ¡: http://localhost:8001

### æ‰‹åŠ¨å¯åŠ¨
#### åç«¯æœåŠ¡
```bash
cd api
uvicorn main:app --reload --port 8001
```

#### å‰ç«¯é¡µé¢
```bash
cd frontend
python -m http.server 8000
```

## APIæ¥å£æ–‡æ¡£

### 1. 7å¤©å¤©æ°”é¢„æŠ¥
- **è·¯å¾„**: `/api/v1/forecast/weekly`
- **æ–¹æ³•**: GET
- **å‚æ•°**:
  | å‚æ•°å | ç±»å‹   | å¿…é¡» | æè¿°           | é»˜è®¤å€¼ |
  |--------|--------|------|----------------|--------|
  | city   | string | æ˜¯   | åŸå¸‚åç§°       | æ—      |
  | days   | int    | å¦   | é¢„æµ‹å¤©æ•°(1-15) | 7      |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "data": [
    {
      "date": "2023-11-15",
      "temp_high": 22,
      "temp_low": 15,
      "precipitation": 30.5,
      "wind_speed": 3.2,
      "uv_index": 5,
      "condition": "å¤šäº‘"
    },
    // ...æ›´å¤šæ—¥æœŸæ•°æ®
  ],
  "message": "success"
}
```

### 2. å°æ—¶çº§å¤©æ°”é¢„æŠ¥
- **è·¯å¾„**: `/api/v1/forecast/hourly`
- **æ–¹æ³•**: GET
- **å‚æ•°**:
  | å‚æ•°å   | ç±»å‹   | å¿…é¡» | æè¿°               | é»˜è®¤å€¼ |
  |----------|--------|------|--------------------|--------|
  | city     | string | æ˜¯   | åŸå¸‚åç§°           | æ—      |
  | hours    | int    | å¦   | é¢„æµ‹å°æ—¶æ•°(1-48)   | 24     |
  | interval | int    | å¦   | æ—¶é—´é—´éš”(1-6å°æ—¶)  | 1      |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "data": [
    {
      "hour": "9:00",
      "temperature": 18.5,
      "precipitation": 10.2
    },
    // ...æ›´å¤šå°æ—¶æ•°æ®
  ],
  "message": "success"
}
```

### 3. å½“å‰å¤©æ°”
- **è·¯å¾„**: `/api/v1/weather/current`
- **æ–¹æ³•**: GET
- **å‚æ•°**:
  | å‚æ•°å | ç±»å‹   | å¿…é¡» | æè¿°     | é»˜è®¤å€¼ |
  |--------|--------|------|----------|--------|
  | city   | string | æ˜¯   | åŸå¸‚åç§° | æ—      |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "data": {
    "date": "2023-11-15",
    "temp_high": 22,
    "temp_low": 15,
    "precipitation": 30.5,
    "wind_speed": 3.2,
    "uv_index": 5,
    "condition": "å¤šäº‘",
    "current_temp": 19.3,
    "humidity": 65.2,
    "wind_direction": "ä¸œå—",
    "visibility": 10.5,
    "pressure": 1005.3,
    "dew_point": 12.1
  },
  "message": "success"
}
```

### 4. ç”Ÿæ´»æŒ‡æ•°
- **è·¯å¾„**: `/api/v1/weather/life-indices`
- **æ–¹æ³•**: GET
- **å‚æ•°**:
  | å‚æ•°å       | ç±»å‹   | å¿…é¡» | æè¿°                                     | é»˜è®¤å€¼ |
  |--------------|--------|------|------------------------------------------|--------|
  | city         | string | æ˜¯   | åŸå¸‚åç§°                                 | æ—      |
  | indices_type | array  | å¦   | æŒ‡æ•°ç±»å‹(uv, comfort, dressing, car_washing, exercise) | å…¨éƒ¨   |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "data": {
    "uv": {
      "level": 5,
      "description": "ä¸­ç­‰ï¼Œæ³¨æ„é˜²æŠ¤",
      "suggestion": "å¤–å‡ºæ—¶å»ºè®®æ¶‚æŠ¹é˜²æ™’éœœ"
    },
    "comfort": {
      "temperature": 18.5,
      "humidity": 65.2,
      "description": "èˆ’é€‚",
      "suggestion": "æ„Ÿè§‰èˆ’é€‚ï¼Œé€‚å®œæ‰“å¼€çª—æˆ·é€šé£"
    },
    // ...æ›´å¤šæŒ‡æ•°æ•°æ®
  },
  "message": "success"
}
```

### 5. åŸå¸‚æœç´¢
- **è·¯å¾„**: `/api/v1/location/search`
- **æ–¹æ³•**: GET
- **å‚æ•°**:
  | å‚æ•°å | ç±»å‹   | å¿…é¡» | æè¿°               | é»˜è®¤å€¼ |
  |--------|--------|------|--------------------|--------|
  | query  | string | æ˜¯   | åŸå¸‚åç§°æœç´¢å…³é”®è¯ | æ—      |
  | limit  | int    | å¦   | æœ€å¤§è¿”å›ç»“æœæ•°     | 10     |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "city": "åŒ—äº¬",
      "latitude": 39.9042,
      "longitude": 116.4074
    },
    // ...æ›´å¤šåŸå¸‚æ•°æ®
  ]
}
```

### 6. ä¿å­˜ä½ç½®
- **è·¯å¾„**: `/api/v1/location/save`
- **æ–¹æ³•**: POST
- **å‚æ•°**:
  | å‚æ•°å    | ç±»å‹    | å¿…é¡» | æè¿°               | é»˜è®¤å€¼ |
  |-----------|---------|------|--------------------|--------|
  | user_id   | string  | æ˜¯   | ç”¨æˆ·ID             | æ—      |
  | city      | string  | æ˜¯   | åŸå¸‚åç§°           | æ—      |
  | lat       | float   | æ˜¯   | çº¬åº¦               | æ—      |
  | lon       | float   | æ˜¯   | ç»åº¦               | æ—      |
  | is_default| boolean | å¦   | æ˜¯å¦è®¾ä¸ºé»˜è®¤ä½ç½®   | false  |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "message": "ä½ç½®ä¿å­˜æˆåŠŸ",
  "data": [
    {
      "city": "åŒ—äº¬",
      "latitude": 39.9042,
      "longitude": 116.4074,
      "is_default": true,
      "saved_at": "2023-11-15T09:30:00.123456"
    },
    // ...æ›´å¤šä½ç½®æ•°æ®
  ]
}
```

### 7. æ¨¡å‹çŠ¶æ€
- **è·¯å¾„**: `/api/v1/model/status`
- **æ–¹æ³•**: GET
- **å‚æ•°**: æ— 

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "data": {
    "model_name": "SimpleMLP",
    "version": "1.0",
    "status": "running",
    "last_trained": "2023-11-01T12:00:00Z",
    "prediction_count": 3562,
    "accuracy": 0.87
  },
  "message": "success"
}
```

### 8. æ¨¡å‹å‚æ•°è°ƒæ•´
- **è·¯å¾„**: `/api/v1/model/parameters`
- **æ–¹æ³•**: POST
- **å‚æ•°**:
  | å‚æ•°å        | ç±»å‹   | å¿…é¡» | æè¿°               | é»˜è®¤å€¼ |
  |---------------|--------|------|--------------------|--------|
  | learning_rate | float  | å¦   | å­¦ä¹ ç‡(0 < x < 1)  | æ—      |
  | batch_size    | int    | å¦   | æ‰¹æ¬¡å¤§å°(1-1024)   | æ—      |
  | epochs        | int    | å¦   | è®­ç»ƒè½®æ¬¡(1-100)    | æ—      |

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "code": 200,
  "data": {
    "message": "æ¨¡å‹å‚æ•°æ›´æ–°æˆåŠŸ",
    "updated_parameters": {
      "learning_rate": 0.001,
      "batch_size": 32
    },
    "timestamp": "2023-11-15T09:35:00.123456"
  },
  "message": "success"
}
```

### 9. å¥åº·æ£€æŸ¥
- **è·¯å¾„**: `/api/v1/health`
- **æ–¹æ³•**: GET
- **å‚æ•°**: æ— 

- **è¾“å‡ºæ ¼å¼**:
```json
{
  "status": "healthy",
  "timestamp": "2023-11-15T09:40:00.123456",
  "version": "1.0"
}
```

## æŠ€æœ¯æ ˆ
- **å‰ç«¯**: HTML, JavaScript, Tailwind CSS, Chart.js
- **åç«¯**: Python, FastAPI, NumPy
- **å¼€å‘å·¥å…·**: Uvicorn

## æ³¨æ„äº‹é¡¹
- æœ¬é¡¹ç›®ä½¿ç”¨æ¨¡æ‹ŸMLPæ¨¡å‹ç”Ÿæˆå¤©æ°”æ•°æ®ï¼Œå®é™…åº”ç”¨ä¸­å¯æ›¿æ¢ä¸ºçœŸå®è®­ç»ƒçš„é¢„æµ‹æ¨¡å‹
- åŸå¸‚æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé‡å¯æœåŠ¡åç”¨æˆ·ä¿å­˜çš„ä½ç½®ä¿¡æ¯å°†ä¸¢å¤±
- ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®æ·»åŠ ç”¨æˆ·è®¤è¯å’Œæˆæƒæœºåˆ¶

## è®¸å¯è¯
[MIT](LICENSE)